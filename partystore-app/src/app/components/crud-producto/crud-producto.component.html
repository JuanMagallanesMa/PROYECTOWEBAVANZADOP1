<div class="crud-container">
  <h2>{{ isEditMode ? 'Editar Producto' : 'Agregar Nuevo Producto' }}</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="nombre">Nombre</label>
      <input id="nombre" formControlName="nombre" type="text" matInput placeholder="Nombre del producto" />
      <div *ngIf="form.controls['nombre'].invalid && form.controls['nombre'].touched">
        <small class="error-message">El nombre es obligatorio y debe tener al menos 8 caracteres.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="descripcion">Descripción</label>
      <input id="descripcion" formControlName="descripcion" type="text" matInput placeholder="Descripción" />
    </div>

    <div class="form-group">
      <label for="precio">Precio</label>
      <input id="precio" formControlName="precio" type="number" matInput placeholder="Precio" />
    </div>

    <div class="form-group">
      <label for="categoria">Categoría</label>
      <mat-select formControlName="categoria" id="categoria">  
        <mat-option value="activo">Decoraciones</mat-option>
        <mat-option value="inactivo">Invitaciones</mat-option>
        <mat-option value="activo">Disfraces</mat-option>
        <mat-option value="activo">Suministro para actividades</mat-option>
        <mat-option value="activo">Juegos</mat-option>
      </mat-select>
    </div>

    <div class="form-group">
      <label for="estado">Estado</label>
      <mat-select formControlName="estado" id="estado" multiple (selectionChange)="onEstadoChange($event)">
        <mat-option value="activo">
          <mat-checkbox [(ngModel)]="activoSeleccionado">Activo</mat-checkbox>
        </mat-option>
        <mat-option value="inactivo">
          <mat-checkbox [(ngModel)]="inactivoSeleccionado">Inactivo</mat-checkbox>
        </mat-option>
      </mat-select>
    </div>
    
    <button mat-raised-button color="primary" type="submit">{{ isEditMode ? 'Actualizar' : 'Crear' }}</button>
    <button mat-raised-button type="button" color="warn" (click)="clearForm()">Limpiar</button>
  </form>

  <div class="crud-table">
    <h3>Lista de Productos</h3>
    <app-table
      [dataSource]="dataSource"
      [displayedColumns]="displayedColumns"
      [columnAliases]="columnAliases"
      (onEdit)="editar($event)"
      (onDelete)="eliminar($event)"
    ></app-table>
  </div>
</div>
